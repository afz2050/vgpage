{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "width": 500,
  "height": 300,
  "title": {
    "text": "CPI for different Item  Groups over time",
    "fontSize": 20
  },
  "data": {
    "url": "https://raw.githubusercontent.com/afz2050/vgpage/refs/heads/master/data/cpi_2d_annual.csv"
  },
  "transform": [
    {"filter": "datum.division != 'overall'"},
    {"filter": {"field": "date", "gt": {"year":2016}}},
    {"lookup": "division",
    "from": {
      "data": {"url": "https://raw.githubusercontent.com/afz2050/vgpage/refs/heads/master/data/cpi_item_dict.csv"},
      "key": "code",
      "fields": ["group"]
    },
    "as": "groupName"}
  ],
  "mark": "bar",
  "encoding": {
    "x": {"field": "date", "type": "temporal"},
    "y": {"field": "index", "type": "quantitative"},
    "xOffset": {"field": "groupName"},
    "color": {"field": "groupName",
    "legend": {"title": "Item Group"}
  }
  }
}